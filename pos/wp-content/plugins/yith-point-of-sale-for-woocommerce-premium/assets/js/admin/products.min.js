!function(e){var i={dom:{inventoryMultiStockManagement:e("#inventory_product_data .yith-pos-stock-management"),manageStock:e("#_manage_stock")},init:function(){e(document).on("click",".clone-stock-group",i.addOption),e(document).on("click",".yith-pos-group .yith-icon-trash",i.deleteOption),i.dom.manageStock.on("change",i.handleGeneralMultiStockVisibility),i.handleGeneralMultiStockVisibility(),e(document).on("change",".yith-pos-product-multistock-enabled",i.handleMultiStockOptionsVisibility),e(document).on("woocommerce_variations_loaded","#woocommerce-product-data",i.initAllMultiStockOptionsVisibility),i.initAllMultiStockOptionsVisibility(),i.initAll(),e(document).on("change",".variable_manage_stock",i.initAll)},initAll:function(){e(".yith-pos-product-multi-stock").each(function(){var t=e(this);t.find(".yith-pos-group").length||t.find(".clone-stock-group").click()})},addOption:function(t){t.preventDefault();var t=e(this),i=t.data("loop"),t=t.closest(".yith-pos-product-multi-stock").find(".yith-pos-multistock-options"),o=wp.template("yith-pos-stock-manager"+i),n=t.find(".yith-pos-group").length;t.append(o({id:n,loop:i})),e(document.body).trigger("wc-enhanced-select-init")},deleteOption:function(t){t.preventDefault();var t=e(this).closest(".yith-pos-group"),i=t.closest(".yith-pos-multistock-options");t.remove(),i.find(".yith-pos-group").length||i.closest(".yith-pos-product-multi-stock").find(".clone-stock-group").first().click()},handleGeneralMultiStockVisibility:function(){var t=i.dom.manageStock.is(":checked");i.dom.inventoryMultiStockManagement.fadeTo(.5,t,function(){t?e(this).show():e(this).hide()})},handleMultiStockOptionsVisibility:function(){var t=e(this),i=t.find("input"),t=t.closest(".yith-pos-stock-management").find(".yith-pos-product-multi-stock");"yes"===i.val()?t.show():t.hide()},initAllMultiStockOptionsVisibility:function(){e(".yith-pos-product-multistock-enabled").each(i.handleMultiStockOptionsVisibility)}};i.init()}(jQuery);